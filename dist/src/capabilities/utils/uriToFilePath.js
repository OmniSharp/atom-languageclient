"use strict";
/**
 *  @license   MIT
 *  @copyright OmniSharp Team
 *  @summary   Adds support for https://github.com/Microsoft/language-server-protocol (and more!) to https://atom.io
 */
var path_1 = require('path');
var url_1 = require('url');
function uriToFilePath(uri) {
    var parsed = url_1.parse(uri);
    if (parsed.protocol !== 'file:' || !parsed.path) {
        return '';
    }
    var segments = parsed.path.split('/');
    for (var i = 0; i < segments.length; i += 1) {
        segments[i] = decodeURIComponent(segments[i]);
    }
    if (process.platform === 'win32' && segments.length > 1) {
        var first = segments[0];
        var second = segments[1];
        // Do we have a drive letter and we started with a / which is the
        // case if the first segement is empty (see split above)
        if (first.length === 0 && second.length > 1 && second[1] === ':') {
            // Remove first slash
            segments.shift();
        }
    }
    return path_1.normalize(segments.join('/'));
}
exports.uriToFilePath = uriToFilePath;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXJpVG9GaWxlUGF0aC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jYXBhYmlsaXRpZXMvdXRpbHMvdXJpVG9GaWxlUGF0aC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRztBQUNILHFCQUEwQixNQUFNLENBQUMsQ0FBQTtBQUNqQyxvQkFBc0IsS0FBSyxDQUFDLENBQUE7QUFDNUIsdUJBQThCLEdBQVc7SUFDckMsSUFBTSxNQUFNLEdBQUcsV0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEtBQUssT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFDRCxJQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQzFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBQ0QsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsS0FBSyxPQUFPLElBQUksUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RELElBQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQixJQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsaUVBQWlFO1FBQ2pFLHdEQUF3RDtRQUN4RCxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvRCxxQkFBcUI7WUFDckIsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3JCLENBQUM7SUFDTCxDQUFDO0lBQ0QsTUFBTSxDQUFDLGdCQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLENBQUM7QUFwQmUscUJBQWEsZ0JBb0I1QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqICBAbGljZW5zZSAgIE1JVFxyXG4gKiAgQGNvcHlyaWdodCBPbW5pU2hhcnAgVGVhbVxyXG4gKiAgQHN1bW1hcnkgICBBZGRzIHN1cHBvcnQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvbGFuZ3VhZ2Utc2VydmVyLXByb3RvY29sIChhbmQgbW9yZSEpIHRvIGh0dHBzOi8vYXRvbS5pb1xyXG4gKi9cclxuaW1wb3J0IHsgbm9ybWFsaXplIH0gZnJvbSAncGF0aCc7XHJcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAndXJsJztcclxuZXhwb3J0IGZ1bmN0aW9uIHVyaVRvRmlsZVBhdGgodXJpOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2UodXJpKTtcclxuICAgIGlmIChwYXJzZWQucHJvdG9jb2wgIT09ICdmaWxlOicgfHwgIXBhcnNlZC5wYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXJzZWQucGF0aC5zcGxpdCgnLycpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIHNlZ21lbnRzW2ldID0gZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnRzW2ldKTtcclxuICAgIH1cclxuICAgIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInICYmIHNlZ21lbnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICBjb25zdCBmaXJzdCA9IHNlZ21lbnRzWzBdO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZCA9IHNlZ21lbnRzWzFdO1xyXG4gICAgICAgIC8vIERvIHdlIGhhdmUgYSBkcml2ZSBsZXR0ZXIgYW5kIHdlIHN0YXJ0ZWQgd2l0aCBhIC8gd2hpY2ggaXMgdGhlXHJcbiAgICAgICAgLy8gY2FzZSBpZiB0aGUgZmlyc3Qgc2VnZW1lbnQgaXMgZW1wdHkgKHNlZSBzcGxpdCBhYm92ZSlcclxuICAgICAgICBpZiAoZmlyc3QubGVuZ3RoID09PSAwICYmIHNlY29uZC5sZW5ndGggPiAxICYmIHNlY29uZFsxXSA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBmaXJzdCBzbGFzaFxyXG4gICAgICAgICAgICBzZWdtZW50cy5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBub3JtYWxpemUoc2VnbWVudHMuam9pbignLycpKTtcclxufVxyXG4iXX0=