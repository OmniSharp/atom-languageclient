"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/**
 *
 */
var ts_disposables_1 = require('ts-disposables');
/* tslint:disable:no-invalid-this */
var View = (function (_super) {
    __extends(View, _super);
    function View(root) {
        _super.call(this);
        this._root = root;
    }
    Object.defineProperty(View.prototype, "root", {
        get: function () { return this._root; },
        enumerable: true,
        configurable: true
    });
    View.prototype.appendTo = function (node) {
        node.appendChild(this.root);
    };
    View.prototype.scrollBottom = function (element, value) {
        if (typeof element === 'number') {
            value = element;
            element = undefined;
        }
        if (element == null) {
            element = this._root;
        }
        if (value) {
            element.scrollTop = value - element.clientHeight;
            return;
        }
        else {
            return element.scrollTop + element.clientHeight;
        }
    };
    View.prototype.scrollDown = function (element) {
        if (element == null) {
            element = this._root;
        }
        element.scrollTop = element.scrollTop + (window.innerHeight / 20);
        return;
    };
    View.prototype.scrollUp = function (element) {
        if (element == null) {
            element = this._root;
        }
        element.scrollTop = element.scrollTop - (window.innerHeight / 20);
        return;
    };
    View.prototype.scrollToTop = function (element) {
        if (element == null) {
            element = this._root;
        }
        element.scrollTop = 0;
        return;
    };
    View.prototype.scrollToBottom = function (element) {
        if (element == null) {
            element = this._root;
        }
        element.scrollTop = element.scrollHeight;
        return;
    };
    View.prototype.pageUp = function (element) {
        if (element == null) {
            element = this._root;
        }
        element.scrollTop = element.scrollTop + element.clientHeight;
        return;
    };
    View.prototype.pageDown = function (element) {
        if (element == null) {
            element = this._root;
        }
        element.scrollTop = element.scrollTop + element.clientHeight;
        return;
    };
    View.prototype.isVisible = function (element) {
        if (element == null) {
            element = this._root;
        }
        return !this.isHidden(element);
    };
    View.prototype.isHidden = function (element) {
        if (element == null) {
            element = this._root;
        }
        var style = element.style;
        if (style.display === 'none' || document.body.contains(element)) {
            return true;
        }
        else if (style.display) {
            return false;
        }
        else {
            return getComputedStyle(element).display === 'none';
        }
    };
    View.prototype.isDisabled = function (element) {
        if (element == null) {
            element = this._root;
        }
        return !!element.getAttribute('disabled');
    };
    View.prototype.enable = function (element) {
        if (element == null) {
            element = this._root;
        }
        return element.removeAttribute('disabled');
    };
    View.prototype.disable = function (element) {
        if (element == null) {
            element = this._root;
        }
        return element.setAttribute('disabled', 'disabled');
    };
    View.prototype.hasFocus = function (element) {
        if (element == null) {
            element = this._root;
        }
        return document.activeElement === element;
    };
    View.prototype.show = function (element) {
        if (element == null) {
            element = this._root;
        }
        if (element.style.display === 'none') {
            element.style.display = '';
        }
    };
    View.prototype.hide = function (element) {
        if (element == null) {
            element = this._root;
        }
        if (element.style.display === '') {
            element.style.display = 'none';
        }
    };
    View.prototype.empty = function (element) {
        if (element == null) {
            element = this._root;
        }
        /* tslint:disable-next-line:no-inner-html */
        element.innerHTML = '';
    };
    return View;
}(ts_disposables_1.DisposableBase));
exports.View = View;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlldy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hdG9tL3ZpZXdzL1ZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0dBRUc7QUFDSCwrQkFBK0IsZ0JBQWdCLENBQUMsQ0FBQTtBQUNoRCxvQ0FBb0M7QUFFcEM7SUFBaUUsd0JBQWM7SUFHM0UsY0FBWSxJQUFjO1FBQ3RCLGlCQUFPLENBQUM7UUFDUixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBSkQsc0JBQVcsc0JBQUk7YUFBZixjQUFvQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBTWpDLHVCQUFRLEdBQWYsVUFBZ0IsSUFBVTtRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBTU0sMkJBQVksR0FBbkIsVUFBb0IsT0FBOEIsRUFBRSxLQUFjO1FBQzlELEVBQUUsQ0FBQyxDQUFDLE9BQU8sT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDOUIsS0FBSyxHQUFHLE9BQU8sQ0FBQztZQUNoQixPQUFPLEdBQUcsU0FBUyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNsQixPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUN6QixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNSLE9BQU8sQ0FBQyxTQUFTLEdBQUcsS0FBSyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUM7WUFDakQsTUFBTSxDQUFDO1FBQ1gsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztRQUNwRCxDQUFD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c2FibGVCYXNlIH0gZnJvbSAndHMtZGlzcG9zYWJsZXMnO1xyXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnZhbGlkLXRoaXMgKi9cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWaWV3PFRFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgRGlzcG9zYWJsZUJhc2Uge1xyXG4gICAgcHJpdmF0ZSBfcm9vdDogVEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgZ2V0IHJvb3QoKSB7IHJldHVybiB0aGlzLl9yb290OyB9XHJcbiAgICBjb25zdHJ1Y3Rvcihyb290OiBURWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fcm9vdCA9IHJvb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGVuZFRvKG5vZGU6IE5vZGUpIHtcclxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMucm9vdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNjcm9sbEJvdHRvbSgpOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc2Nyb2xsQm90dG9tKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyO1xyXG4gICAgcHVibGljIHNjcm9sbEJvdHRvbSh2YWx1ZTogbnVtYmVyKTogdm9pZDtcclxuICAgIHB1YmxpYyBzY3JvbGxCb3R0b20oZWxlbWVudDogSFRNTEVsZW1lbnQsIHZhbHVlOiBudW1iZXIpOiB2b2lkO1xyXG4gICAgcHVibGljIHNjcm9sbEJvdHRvbShlbGVtZW50PzogSFRNTEVsZW1lbnQgfCBudW1iZXIsIHZhbHVlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSB2YWx1ZSAtIGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuc2Nyb2xsVG9wICsgZWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY3JvbGxEb3duKCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgc2Nyb2xsRG93bihlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgc2Nyb2xsRG93bihlbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLl9yb290ITtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3AgKyAod2luZG93LmlubmVySGVpZ2h0IC8gMjApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2Nyb2xsVXAoKTogdm9pZDtcclxuICAgIHB1YmxpYyBzY3JvbGxVcChlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgc2Nyb2xsVXAoZWxlbWVudD86IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5fcm9vdCE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3AgLSAod2luZG93LmlubmVySGVpZ2h0IC8gMjApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2Nyb2xsVG9Ub3AoKTogdm9pZDtcclxuICAgIHB1YmxpYyBzY3JvbGxUb1RvcChlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgc2Nyb2xsVG9Ub3AoZWxlbWVudD86IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5fcm9vdCE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNjcm9sbFRvQm90dG9tKCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgc2Nyb2xsVG9Cb3R0b20oZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkO1xyXG4gICAgcHVibGljIHNjcm9sbFRvQm90dG9tKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3QhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCA9IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFnZVVwKCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgcGFnZVVwKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZDtcclxuICAgIHB1YmxpYyBwYWdlVXAoZWxlbWVudD86IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5fcm9vdCE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3AgKyBlbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhZ2VEb3duKCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgcGFnZURvd24oZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkO1xyXG4gICAgcHVibGljIHBhZ2VEb3duKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3QhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wICsgZWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1Zpc2libGUoKTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc1Zpc2libGUoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzVmlzaWJsZShlbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLl9yb290ITtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzSGlkZGVuKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0hpZGRlbigpOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzSGlkZGVuKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc0hpZGRlbihlbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLl9yb290ITtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50LnN0eWxlO1xyXG5cclxuICAgICAgICBpZiAoc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdHlsZS5kaXNwbGF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5kaXNwbGF5ID09PSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0Rpc2FibGVkKCk6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaXNEaXNhYmxlZChlbGVtZW50OiBIVE1MRWxlbWVudCk6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaXNEaXNhYmxlZChlbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLl9yb290ITtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICEhZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuYWJsZSgpOiB2b2lkO1xyXG4gICAgcHVibGljIGVuYWJsZShlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgZW5hYmxlKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3QhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc2FibGUoKTogdm9pZDtcclxuICAgIHB1YmxpYyBkaXNhYmxlKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZDtcclxuICAgIHB1YmxpYyBkaXNhYmxlKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3QhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc0ZvY3VzKCk6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaGFzRm9jdXMoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuO1xyXG4gICAgcHVibGljIGhhc0ZvY3VzKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3QhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvdygpOiB2b2lkO1xyXG4gICAgcHVibGljIHNob3coZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkO1xyXG4gICAgcHVibGljIHNob3coZWxlbWVudD86IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5fcm9vdCE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZGUoKTogdm9pZDtcclxuICAgIHB1YmxpYyBoaWRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZDtcclxuICAgIHB1YmxpYyBoaWRlKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuX3Jvb3QhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnJykge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbXB0eSgpOiB2b2lkO1xyXG4gICAgcHVibGljIGVtcHR5KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZDtcclxuICAgIHB1YmxpYyBlbXB0eShlbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLl9yb290ITtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWlubmVyLWh0bWwgKi9cclxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==